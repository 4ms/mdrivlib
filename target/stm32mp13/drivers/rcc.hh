#pragma once
#include "drivers/rcc_reset.hh"
#include "drivers/register_access.hh"
#include "drivers/stm32xx.h"
#include <cstddef>
#include <variant>

namespace mdrivlib
{
namespace RCC_Enable
{
using RegisterDataT = uint32_t;

// clang-format off

// Auto-generated by:
// :s/\v#define RCC_(.{-}ENSETR)_([^ ]{-})EN[^_] /using \2_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, \1), RCC_\1_\2EN>;\r\0/
using ADC1_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_AHB2ENSETR), RCC_MP_AHB2ENSETR_ADC1EN>;
using ADC2_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_AHB2ENSETR), RCC_MP_AHB2ENSETR_ADC2EN>;
using ADFSDM_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB2ENSETR), RCC_MP_APB2ENSETR_ADFSDMEN>;
using AXIMC_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_AHB5ENSETR), RCC_MP_AHB5ENSETR_AXIMCEN>;
using BKPSRAM_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_AHB5ENSETR), RCC_MP_AHB5ENSETR_BKPSRAMEN>;
using BSEC_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB5ENSETR), RCC_MP_APB5ENSETR_BSECEN>;
using CRC1_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_AHB6ENSETR), RCC_MP_AHB6ENSETR_CRC1EN>;
using CRYP1_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_AHB5ENSETR), RCC_MP_AHB5ENSETR_CRYP1EN>;
using DCMIPP_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB4ENSETR), RCC_MP_APB4ENSETR_DCMIPPEN>;
using DDRPERFM_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB4ENSETR), RCC_MP_APB4ENSETR_DDRPERFMEN>;
using DFSDM_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB2ENSETR), RCC_MP_APB2ENSETR_DFSDMEN>;
using DMA1_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_AHB2ENSETR), RCC_MP_AHB2ENSETR_DMA1EN>;
using DMA2_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_AHB2ENSETR), RCC_MP_AHB2ENSETR_DMA2EN>;
using DMA3_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_AHB2ENSETR), RCC_MP_AHB2ENSETR_DMA3EN>;
using DMAMUX1_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_AHB2ENSETR), RCC_MP_AHB2ENSETR_DMAMUX1EN>;
using DMAMUX2_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_AHB2ENSETR), RCC_MP_AHB2ENSETR_DMAMUX2EN>;
using DTS_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB3ENSETR), RCC_MP_APB3ENSETR_DTSEN>;
using ETH1CK_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_AHB6ENSETR), RCC_MP_AHB6ENSETR_ETH1CKEN>;
using ETH1MAC_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_AHB6ENSETR), RCC_MP_AHB6ENSETR_ETH1MACEN>;
using ETH1RX_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_AHB6ENSETR), RCC_MP_AHB6ENSETR_ETH1RXEN>;
using ETH1TX_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_AHB6ENSETR), RCC_MP_AHB6ENSETR_ETH1TXEN>;
using ETH2CK_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_AHB6ENSETR), RCC_MP_AHB6ENSETR_ETH2CKEN>;
using ETH2MAC_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_AHB6ENSETR), RCC_MP_AHB6ENSETR_ETH2MACEN>;
using ETH2RX_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_AHB6ENSETR), RCC_MP_AHB6ENSETR_ETH2RXEN>;
using ETH2TX_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_AHB6ENSETR), RCC_MP_AHB6ENSETR_ETH2TXEN>;
using ETZPC_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB5ENSETR), RCC_MP_APB5ENSETR_ETZPCEN>;
using FDCAN_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB2ENSETR), RCC_MP_APB2ENSETR_FDCANEN>;
using FMC_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_AHB6ENSETR), RCC_MP_AHB6ENSETR_FMCEN>;
using GPIOA_NS = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_NS_AHB4ENSETR), RCC_MP_NS_AHB4ENSETR_GPIOAEN>;
using GPIOA_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_S_AHB4ENSETR), RCC_MP_S_AHB4ENSETR_GPIOAEN>;
using GPIOB_NS = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_NS_AHB4ENSETR), RCC_MP_NS_AHB4ENSETR_GPIOBEN>;
using GPIOB_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_S_AHB4ENSETR), RCC_MP_S_AHB4ENSETR_GPIOBEN>;
using GPIOC_NS = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_NS_AHB4ENSETR), RCC_MP_NS_AHB4ENSETR_GPIOCEN>;
using GPIOC_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_S_AHB4ENSETR), RCC_MP_S_AHB4ENSETR_GPIOCEN>;
using GPIOD_NS = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_NS_AHB4ENSETR), RCC_MP_NS_AHB4ENSETR_GPIODEN>;
using GPIOD_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_S_AHB4ENSETR), RCC_MP_S_AHB4ENSETR_GPIODEN>;
using GPIOE_NS = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_NS_AHB4ENSETR), RCC_MP_NS_AHB4ENSETR_GPIOEEN>;
using GPIOE_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_S_AHB4ENSETR), RCC_MP_S_AHB4ENSETR_GPIOEEN>;
using GPIOF_NS = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_NS_AHB4ENSETR), RCC_MP_NS_AHB4ENSETR_GPIOFEN>;
using GPIOF_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_S_AHB4ENSETR), RCC_MP_S_AHB4ENSETR_GPIOFEN>;
using GPIOG_NS = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_NS_AHB4ENSETR), RCC_MP_NS_AHB4ENSETR_GPIOGEN>;
using GPIOG_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_S_AHB4ENSETR), RCC_MP_S_AHB4ENSETR_GPIOGEN>;
using GPIOH_NS = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_NS_AHB4ENSETR), RCC_MP_NS_AHB4ENSETR_GPIOHEN>;
using GPIOH_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_S_AHB4ENSETR), RCC_MP_S_AHB4ENSETR_GPIOHEN>;
using GPIOI_NS = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_NS_AHB4ENSETR), RCC_MP_NS_AHB4ENSETR_GPIOIEN>;
using GPIOI_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_S_AHB4ENSETR), RCC_MP_S_AHB4ENSETR_GPIOIEN>;
using HASH1_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_AHB5ENSETR), RCC_MP_AHB5ENSETR_HASH1EN>;
using HDP_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB3ENSETR), RCC_MP_APB3ENSETR_HDPEN>;
using I2C1_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB1ENSETR), RCC_MP_APB1ENSETR_I2C1EN>;
using I2C2_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB1ENSETR), RCC_MP_APB1ENSETR_I2C2EN>;
using I2C3_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB6ENSETR), RCC_MP_APB6ENSETR_I2C3EN>;
using I2C4_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB6ENSETR), RCC_MP_APB6ENSETR_I2C4EN>;
using I2C5_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB6ENSETR), RCC_MP_APB6ENSETR_I2C5EN>;
using IWDG1APB_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB5ENSETR), RCC_MP_APB5ENSETR_IWDG1APBEN>;
using IWDG2APB_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB4ENSETR), RCC_MP_APB4ENSETR_IWDG2APBEN>;
using LPTIM1_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB1ENSETR), RCC_MP_APB1ENSETR_LPTIM1EN>;
using LPTIM2_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB3ENSETR), RCC_MP_APB3ENSETR_LPTIM2EN>;
using LPTIM3_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB3ENSETR), RCC_MP_APB3ENSETR_LPTIM3EN>;
using LPTIM4_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB3ENSETR), RCC_MP_APB3ENSETR_LPTIM4EN>;
using LPTIM5_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB3ENSETR), RCC_MP_APB3ENSETR_LPTIM5EN>;
using LTDC_NS = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_NS_APB4ENSETR), RCC_MP_NS_APB4ENSETR_LTDCEN>;
using LTDC_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_S_APB4ENSETR), RCC_MP_S_APB4ENSETR_LTDCEN>;
using MCE_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_AHB6ENSETR), RCC_MP_AHB6ENSETR_MCEEN>;
using MDMA_NS = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_NS_AHB6ENSETR), RCC_MP_NS_AHB6ENSETR_MDMAEN>;
using MDMA_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_S_AHB6ENSETR), RCC_MP_S_AHB6ENSETR_MDMAEN>;
using PKA_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_AHB5ENSETR), RCC_MP_AHB5ENSETR_PKAEN>;
using PMBCTRL_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB3ENSETR), RCC_MP_APB3ENSETR_PMBCTRLEN>;
using QSPI_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_AHB6ENSETR), RCC_MP_AHB6ENSETR_QSPIEN>;
using RNG1_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_AHB5ENSETR), RCC_MP_AHB5ENSETR_RNG1EN>;
using RTCAPB_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB5ENSETR), RCC_MP_APB5ENSETR_RTCAPBEN>;
using SAES_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_AHB5ENSETR), RCC_MP_AHB5ENSETR_SAESEN>;
using SAI1_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB2ENSETR), RCC_MP_APB2ENSETR_SAI1EN>;
using SAI2_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB2ENSETR), RCC_MP_APB2ENSETR_SAI2EN>;
using SDMMC1_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_AHB6ENSETR), RCC_MP_AHB6ENSETR_SDMMC1EN>;
using SDMMC2_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_AHB6ENSETR), RCC_MP_AHB6ENSETR_SDMMC2EN>;
using SPDIF_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB1ENSETR), RCC_MP_APB1ENSETR_SPDIFEN>;
using SPI1_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB2ENSETR), RCC_MP_APB2ENSETR_SPI1EN>;
using SPI2_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB1ENSETR), RCC_MP_APB1ENSETR_SPI2EN>;
using SPI3_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB1ENSETR), RCC_MP_APB1ENSETR_SPI3EN>;
using SPI4_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB6ENSETR), RCC_MP_APB6ENSETR_SPI4EN>;
using SPI5_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB6ENSETR), RCC_MP_APB6ENSETR_SPI5EN>;
using STGENC_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB5ENSETR), RCC_MP_APB5ENSETR_STGENCEN>;
using STGENRO_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB4ENSETR), RCC_MP_APB4ENSETR_STGENROEN>;
using SYSCFG_NS = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_NS_APB3ENSETR), RCC_MP_NS_APB3ENSETR_SYSCFGEN>;
using SYSCFG_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_S_APB3ENSETR), RCC_MP_S_APB3ENSETR_SYSCFGEN>;
using TIM12_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB6ENSETR), RCC_MP_APB6ENSETR_TIM12EN>;
using TIM13_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB6ENSETR), RCC_MP_APB6ENSETR_TIM13EN>;
using TIM14_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB6ENSETR), RCC_MP_APB6ENSETR_TIM14EN>;
using TIM15_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB6ENSETR), RCC_MP_APB6ENSETR_TIM15EN>;
using TIM16_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB6ENSETR), RCC_MP_APB6ENSETR_TIM16EN>;
using TIM17_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB6ENSETR), RCC_MP_APB6ENSETR_TIM17EN>;
using TIM1_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB2ENSETR), RCC_MP_APB2ENSETR_TIM1EN>;
using TIM2_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB1ENSETR), RCC_MP_APB1ENSETR_TIM2EN>;
using TIM3_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB1ENSETR), RCC_MP_APB1ENSETR_TIM3EN>;
using TIM4_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB1ENSETR), RCC_MP_APB1ENSETR_TIM4EN>;
using TIM5_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB1ENSETR), RCC_MP_APB1ENSETR_TIM5EN>;
using TIM6_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB1ENSETR), RCC_MP_APB1ENSETR_TIM6EN>;
using TIM7_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB1ENSETR), RCC_MP_APB1ENSETR_TIM7EN>;
using TIM8_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB2ENSETR), RCC_MP_APB2ENSETR_TIM8EN>;
using TZC_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB5ENSETR), RCC_MP_APB5ENSETR_TZCEN>;
using UART4_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB1ENSETR), RCC_MP_APB1ENSETR_UART4EN>;
using UART5_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB1ENSETR), RCC_MP_APB1ENSETR_UART5EN>;
using UART7_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB1ENSETR), RCC_MP_APB1ENSETR_UART7EN>;
using UART8_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB1ENSETR), RCC_MP_APB1ENSETR_UART8EN>;
using USART1_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB6ENSETR), RCC_MP_APB6ENSETR_USART1EN>;
using USART2_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB6ENSETR), RCC_MP_APB6ENSETR_USART2EN>;
using USART3_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB1ENSETR), RCC_MP_APB1ENSETR_USART3EN>;
using USART6_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB2ENSETR), RCC_MP_APB2ENSETR_USART6EN>;
using USBH_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_AHB6ENSETR), RCC_MP_AHB6ENSETR_USBHEN>;
using USBO_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_AHB2ENSETR), RCC_MP_AHB2ENSETR_USBOEN>;
using USBPHY_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB4ENSETR), RCC_MP_APB4ENSETR_USBPHYEN>;
using VREF_ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MP_APB3ENSETR), RCC_MP_APB3ENSETR_VREFEN>;

// clang-format on

// Aliases:
using DMAMUX_ = DMAMUX1_;
using DMAMUX_SECURE = DMAMUX2_;

// Blanks:
using ADC3_ = NonexistantRegister;
using I2C6_ = NonexistantRegister;
using BDMA_ = NonexistantRegister;
using TIM9_ = NonexistantRegister;
using TIM10_ = NonexistantRegister;
using TIM11_ = NonexistantRegister;
using SAI3_ = NonexistantRegister;
using SAI4_ = NonexistantRegister;
using SPI6_ = NonexistantRegister;

//// special-case: GPIO port base address can be used to calc bit-offset of RCC enable bit
struct GPIO {
	static inline volatile RegisterDataT *const _reg = &(RCC->MP_S_AHB4ENSETR);

	static uint32_t get_gpio_bit(RegisterDataT periph) {
		return 1 << (((periph >> 12) - 2) & 0b1111);
	}

	static void enable(GPIO_TypeDef *periph) {
		*_reg = *_reg | get_gpio_bit(reinterpret_cast<RegisterDataT>(periph));
		[[maybe_unused]] bool delay_after_enabling = is_enabled(periph);
	}

	static void disable(GPIO_TypeDef *periph) {
		*_reg = *_reg & ~get_gpio_bit(reinterpret_cast<RegisterDataT>(periph));
		[[maybe_unused]] bool delay_after_disabling = is_enabled(periph);
	}

	static bool is_enabled(GPIO_TypeDef *periph) {
		return (*_reg) & get_gpio_bit(reinterpret_cast<RegisterDataT>(periph));
	}
};

using SAI_variant = std::variant<SAI1_, SAI2_, SAI3_, SAI4_>;
template<unsigned N>
using SAI = typename std::variant_alternative_t<N - 1, SAI_variant>;

using SPI_variant = std::variant<SPI1_, SPI2_, SPI3_, SPI4_, SPI5_, SPI6_>;
template<unsigned N>
using SPI = typename std::variant_alternative_t<N - 1, SPI_variant>;

} // namespace RCC_Enable

namespace RCC_Clocks
{
// clang-format off
using MPUClockSrcReady = RegisterBits<ReadOnly, RCC_BASE + offsetof(RCC_TypeDef, MPCKSELR), RCC_MPCKSELR_MPUSRCRDY_Msk>;
using MPUClockSrc = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, MPCKSELR), RCC_MPCKSELR_MPUSRC_Msk>;
enum : uint32_t { MPUClockSrcHSI = 0b00, MPUClockSrcHSE = 0b01, MPUClockSrcPLL1 = 0b10, MPUClockSrcPLL1DIV = 0b11 };

using AXISClockSrcReady = RegisterBits<ReadOnly, RCC_BASE + offsetof(RCC_TypeDef, MPCKSELR), RCC_ASSCKSELR_AXISSRCRDY_Msk>;
using AXISClockSrc = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, ASSCKSELR), RCC_ASSCKSELR_AXISSRC_Msk>;
enum : uint32_t { AXISClockSrcHSI = 0b00, AXISClockSrcHSE = 0b01, AXISClockSrcPLL2 = 0b10 };

using AXIDiv = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, AXIDIVR), RCC_AXIDIVR_AXIDIV>;
enum : uint32_t { AXIDivOff = 0b000, AXIDiv2 = 0b001, AXIDiv3 = 0b010, AXIDiv4 = 0b011 };
using AXIDivReady = RegisterBits<ReadOnly, RCC_BASE + offsetof(RCC_TypeDef, AXIDIVR), RCC_AXIDIVR_AXIDIVRDY>;

// TODO:
// RCC_MSSCKSELR
// RCC_CPERCKSELR


//// Auto-generated by:
//// :s/\v#define RCC_([^_]{-})_([^ _]{-})\s /using \2 = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, \1), RCC_\1_\2>;\r\0/
using OscEnableSetHSION = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, OCENSETR), RCC_OCENSETR_HSION>;
using OscEnableSetHSIKERON = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, OCENSETR), RCC_OCENSETR_HSIKERON>;
using OscEnableSetCSION = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, OCENSETR), RCC_OCENSETR_CSION>;
using OscEnableSetCSIKERON = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, OCENSETR), RCC_OCENSETR_CSIKERON>;
using OscEnableSetDIGBYP = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, OCENSETR), RCC_OCENSETR_DIGBYP>;
using OscEnableSetHSEON = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, OCENSETR), RCC_OCENSETR_HSEON>;
using OscEnableSetHSEKERON = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, OCENSETR), RCC_OCENSETR_HSEKERON>;
using OscEnableSetHSEBYP = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, OCENSETR), RCC_OCENSETR_HSEBYP>;
using OscEnableSetHSECSSON = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, OCENSETR), RCC_OCENSETR_HSECSSON>;

using OscEnableClearHSION = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, OCENCLRR), RCC_OCENCLRR_HSION>;
using OscEnableClearHSIKERON = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, OCENCLRR), RCC_OCENCLRR_HSIKERON>;
using OscEnableClearCSION = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, OCENCLRR), RCC_OCENCLRR_CSION>;
using OscEnableClearCSIKERON = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, OCENCLRR), RCC_OCENCLRR_CSIKERON>;
using OscEnableClearDIGBYP = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, OCENCLRR), RCC_OCENCLRR_DIGBYP>;
using OscEnableClearHSEON = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, OCENCLRR), RCC_OCENCLRR_HSEON>;
using OscEnableClearHSEKERON = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, OCENCLRR), RCC_OCENCLRR_HSEKERON>;
using OscEnableClearHSEBYP = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, OCENCLRR), RCC_OCENCLRR_HSEBYP>;

using OscEnableHSION = RegisterSetClear<OscEnableSetHSION, OscEnableClearHSION>;
using OscEnableHSIKERON = RegisterSetClear<OscEnableSetHSIKERON, OscEnableClearHSIKERON>;
using OscEnableCSION = RegisterSetClear<OscEnableSetCSION, OscEnableClearCSION>;
using OscEnableCSIKERON = RegisterSetClear<OscEnableSetCSIKERON, OscEnableClearCSIKERON>;
using OscEnableDIGBYP = RegisterSetClear<OscEnableSetDIGBYP, OscEnableClearDIGBYP>;
using OscEnableHSEON = RegisterSetClear<OscEnableSetHSEON, OscEnableClearHSEON>;
using OscEnableHSEKERON = RegisterSetClear<OscEnableSetHSEKERON, OscEnableClearHSEKERON>;
using OscEnableHSEBYP = RegisterSetClear<OscEnableSetHSEBYP, OscEnableClearHSEBYP>;

using AXISClockReady = RegisterBits<ReadOnly, RCC_BASE + offsetof(RCC_TypeDef, OCRDYR), RCC_OCRDYR_AXICKRDY>;
// using ClockRestoreReady = RegisterBits<ReadOnly, RCC_BASE + offsetof(RCC_TypeDef, OCRDYR), RCC_OCRDYR_CKREST>;
using CSIClockReady = RegisterBits<ReadOnly, RCC_BASE + offsetof(RCC_TypeDef, OCRDYR), RCC_OCRDYR_CSIRDY>;
using HSEClockReady = RegisterBits<ReadOnly, RCC_BASE + offsetof(RCC_TypeDef, OCRDYR), RCC_OCRDYR_HSERDY>;
using HSIDividerReady = RegisterBits<ReadOnly, RCC_BASE + offsetof(RCC_TypeDef, OCRDYR), RCC_OCRDYR_HSIDIVRDY>;
using HSIClockReady = RegisterBits<ReadOnly, RCC_BASE + offsetof(RCC_TypeDef, OCRDYR), RCC_OCRDYR_HSIRDY>;
using MPUClockReady = RegisterBits<ReadOnly, RCC_BASE + offsetof(RCC_TypeDef, OCRDYR), RCC_OCRDYR_MPUCKRDY>;

using PLL12Source = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, RCK12SELR), RCC_RCK12SELR_PLL12SRC>;
enum {PLL12SourceHSI = 0, PLL12SourceHSE = 1};
using PLL12SourceReady = RegisterBits<ReadOnly, RCC_BASE + offsetof(RCC_TypeDef, RCK12SELR), RCC_RCK12SELR_PLL12SRCRDY>;

namespace PLL1 {
using Enable = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, PLL1CR), RCC_PLL1CR_PLLON>;
using Ready = RegisterBits<ReadOnly, RCC_BASE + offsetof(RCC_TypeDef, PLL1CR), RCC_PLL1CR_PLL1RDY>;
using DIVPEnable = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, PLL1CR), RCC_PLL1CR_DIVPEN>;
using DIVQEnable = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, PLL1CR), RCC_PLL1CR_DIVQEN>;
using DIVREnable = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, PLL1CR), RCC_PLL1CR_DIVREN>;

using DIVM1 = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, PLL1CFGR1), RCC_PLL1CFGR1_DIVM1>;
using DIVN = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, PLL1CFGR1), RCC_PLL1CFGR1_DIVN>;
using DIVP = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, PLL1CFGR2), RCC_PLL1CFGR2_DIVP>;
using DIVQ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, PLL1CFGR2), RCC_PLL1CFGR2_DIVQ>;
using DIVR = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, PLL1CFGR2), RCC_PLL1CFGR2_DIVR>;
using FRACValue = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, PLL1FRACR), RCC_PLL1FRACR_FRACV>;
using FRACLatch = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, PLL1FRACR), RCC_PLL1FRACR_FRACLE>;

namespace SpreadSpectrumClockGen {
using Enable = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, PLL1CR), RCC_PLL1CR_SSCG_CTRL>;
using ModPeriod = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, PLL1CSGR), RCC_PLL1CSGR_MOD_PER>;
using IncStep = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, PLL1CSGR), RCC_PLL1CSGR_INC_STEP>;
using DitheringRPDFDisable = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, PLL1CSGR), RCC_PLL1CSGR_RPDFN_DIS>;
using ModeCenterDown = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, PLL1CSGR), RCC_PLL1CSGR_SSCG_MODE>;
using DitheringTPDFDisable = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, PLL1CSGR), RCC_PLL1CSGR_TPDFN_DIS>;
} // namespace SpreadSpectrumClock
} // namespace PLL1

namespace PLL2 {
using Enable = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, PLL2CR), RCC_PLL2CR_PLLON>;
using Ready = RegisterBits<ReadOnly, RCC_BASE + offsetof(RCC_TypeDef, PLL2CR), RCC_PLL2CR_PLL2RDY>;
using DIVPEnable = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, PLL2CR), RCC_PLL2CR_DIVPEN>;
using DIVQEnable = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, PLL2CR), RCC_PLL2CR_DIVQEN>;
using DIVREnable = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, PLL2CR), RCC_PLL2CR_DIVREN>;

using DIVM2 = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, PLL2CFGR1), RCC_PLL2CFGR1_DIVM2>;
using DIVN = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, PLL2CFGR1), RCC_PLL2CFGR1_DIVN>;
using DIVP = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, PLL2CFGR2), RCC_PLL2CFGR2_DIVP>;
using DIVQ = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, PLL2CFGR2), RCC_PLL2CFGR2_DIVQ>;
using DIVR = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, PLL2CFGR2), RCC_PLL2CFGR2_DIVR>;
using FRACValue = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, PLL2FRACR), RCC_PLL2FRACR_FRACV>;
using FRACLatch = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, PLL2FRACR), RCC_PLL2FRACR_FRACLE>;

namespace SpreadSpectrumClockGen {
using Enable = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, PLL2CR), RCC_PLL2CR_SSCG_CTRL>;
using ModPeriod = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, PLL2CSGR), RCC_PLL2CSGR_MOD_PER>;
using IncStep = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, PLL2CSGR), RCC_PLL2CSGR_INC_STEP>;
using DitheringRPDFDisable = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, PLL2CSGR), RCC_PLL2CSGR_RPDFN_DIS>;
using ModeCenterDown = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, PLL2CSGR), RCC_PLL2CSGR_SSCG_MODE>;
using DitheringTPDFDisable = RegisterBits<ReadWrite, RCC_BASE + offsetof(RCC_TypeDef, PLL2CSGR), RCC_PLL2CSGR_TPDFN_DIS>;
} // namespace SpreadSpectrumClock
} // namespace PLL2

// TODO:
// RCC_RCK3SELR
// RCC_PLL3CR
// RCC_PLL4CR

//  clang-format on

} // namespace RCC_Clocks

} // namespace mdrivlib
